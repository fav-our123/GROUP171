<!doctype html>
<html lang="en">
<head>
 <meta charset="utf-8" />
 <meta name="viewport" content="width=device-width,initial-scale=1" />
 <title>FUTO â€¢ Announcements</title>
 <link rel="preconnect" href="https://fonts.googleapis.com" />
 <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
 <link
 href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
 rel="stylesheet"
/>
 <style>
   :root {
     --green: #0b7a3f;
     --green-dark: #096735;
     --light-bg: #f5f7fa;
     --white: #ffffff;
     --text-dark: #333333;
     --muted: #6b7280;
   }
   body { font-family: 'Inter', sans-serif; background: var(--light-bg); color: var(--text-dark); margin: 0; padding: 0; }
   header.header { background: var(--green); color: var(--white); padding: 1rem 2rem; }
   .header-inner { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; max-width: 1100px; margin: 0 auto; }
   .brand { display: flex; align-items: center; gap: 0.6rem; }
   nav.site-nav a { color: var(--white); text-decoration: none; font-weight: 500; font-size: 1rem; padding: 0.5rem 1rem; border-radius: 4px; background-color: transparent; transition: all 0.2s ease; border: 1px solid transparent; }
   nav.site-nav a.active { border-bottom: 2px solid var(--white); }
   main.container { max-width: 1100px; margin: 2rem auto; padding: 0 1rem; }
   .content-layout { display: flex; gap: 2rem; margin-top: 2rem; }
   .main-announcements { flex: 3; min-width: 0; }
   .sidebar { flex: 1; min-width: 200px; }
   .announcement-item { background: var(--white); padding: 1.5rem; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 1.5rem; border-left: 5px solid var(--green); }
   .announcement-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.5rem; }
   .announcement-title { font-size: 1.25rem; font-weight: 700; margin: 0; color: var(--text-dark); }
   .announcement-meta { font-size: 0.85rem; color: var(--muted); text-align: right; }
   .announcement-tag { display: inline-block; background-color: #eaf7ee; color: var(--green-dark); padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; margin-right: 0.5rem; }
   @media (max-width: 768px) { .content-layout { flex-direction: column; gap: 1.5rem; } .sidebar { order: -1; min-width: 100%; } .announcement-header { flex-direction: column; align-items: flex-start; } .announcement-meta { text-align: left; margin-top: 0.25rem; } }
 </style>
</head>
<body>
  <header class="header">
    <div class="header-inner">
      <div class="brand">
        <img src="Federal-University-of-Technology-Owerri-logo (1).jpg" alt="FUTO Logo" style="height:32px;width:32px;border-radius:50%;">
        <div>
          <strong>FUTO</strong>
          <div style="font-size:.82rem;color:rgba(255,255,255,.9)">Computer Science Department</div>
        </div>
      </div>
      <nav id="siteNav" class="site-nav">
        <a href="index.html">Home</a>
        <a href="announcements.html" class="active">Announcements</a>
        <a href="events.html">Events</a>
        <a href="results.html">Results</a>
        <a href="contact.html">Contact</a>
        <a href="admin.html">Admin</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <h2>Departmental Announcements ðŸ“¢</h2>
    <p style="color:var(--muted)">Stay up-to-date with the latest academic, administrative, and general notices.</p>
    <div class="content-layout">
      <div class="main-announcements" id="announcementContainer">
        <!-- your hardcoded announcements remain exactly as you wrote them -->
        <div class="announcement-item" style="border-left-color: #d90000;">
          <div class="announcement-header">
            <h3 class="announcement-title">Rescheduling of Mid-Semester Examinations</h3>
            <div class="announcement-meta">
              <span class="announcement-tag" style="background-color: #ffdce0; color: #d90000;">Urgent</span>
              Published: Oct 10, 2025
            </div>
          </div>
          <p>Please note that all Mid-Semester Examinations previously scheduled for this week have been moved to the following week.</p>
        </div>

        <div class="announcement-item">
          <div class="announcement-header">
            <h3 class="announcement-title">New Faculty Member Orientation and Welcome</h3>
            <div class="announcement-meta">
              <span class="announcement-tag">General</span>
              Published: Sep 28, 2025
            </div>
          </div>
          <p>We are delighted to welcome Dr. Ngozi Okafor, specializing in AI and Machine Learning, to the Computer Science department.</p>
        </div>

        <div class="announcement-item" style="border-left-color: #2563eb;">
          <div class="announcement-header">
            <h3 class="announcement-title">Project Defense Submission Deadline Extended</h3>
            <div class="announcement-meta">
              <span class="announcement-tag" style="background-color: #e6f0ff; color: #2563eb;">Academic</span>
              Published: Sep 20, 2025
            </div>
          </div>
          <p>The deadline for final submission of all BSc and MSc project defenses has been extended by one week.</p>
        </div>
      </div>

      <div class="sidebar">
        <div class="card">
          <h3>Filter by Category</h3>
          <ul class="filter-list">
            <li><a href="#">All Announcements (55)</a></li>
            <li><a href="#">Academic (18)</a></li>
            <li><a href="#">Administrative (12)</a></li>
            <li><a href="#">Exams & Results (8)</a></li>
            <li><a href="#">General Notices (17)</a></li>
          </ul>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div>
      <div>Â© 2025 FUTO</div>
      <div>Contact: csdept@futo.edu.ng</div>
    </div>
  </footer>

  <!-- ðŸ”½ Added script to fetch DB announcements -->
  <script>
  const API_BASE = "https://group17.onrender.com";

  async function loadDbAnnouncements() {
    const container = document.getElementById("announcementContainer");

    try {
      const res = await fetch(`${API_BASE}/api/announcements`);
      const data = await res.json();

      if (res.ok && Array.isArray(data) && data.length > 0) {
        data.forEach(a => {
          const item = document.createElement("div");
          item.className = "announcement-item";
          item.innerHTML = `
            <div class="announcement-header">
              <h3 class="announcement-title">${a.title}</h3>
              <div class="announcement-meta">
                <span class="announcement-tag" style="background-color:#eaf7ee;color:#0b7a3f;">New</span>
                Published: ${new Date(a.posted_at).toLocaleDateString()}
              </div>
            </div>
            <p>${a.body}</p>
          `;
          container.prepend(item); // adds new ones first
        });
      }
    } catch (err) {
      console.error("Error loading announcements:", err);
    }
  }

  loadDbAnnouncements();
</script>
</body>
</html>
